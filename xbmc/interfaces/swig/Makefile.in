INCLUDES=-I../../.. -I. -I../../ -I../../linux -I../../../guilib -I.
SRCS=	python/CallbackHandler.cpp python/LanguageHook.cpp \
	python/XBPyThread.cpp python/XBPython.cpp python/swig.cpp \
	generatedSWIGBindings/AddonModuleXbmc.cpp \
	generatedSWIGBindings/AddonModuleXbmcgui.cpp \
	generatedSWIGBindings/AddonModuleXbmcplugin.cpp \
	generatedSWIGBindings/AddonModuleXbmcaddon.cpp \
	generatedSWIGBindings/AddonModuleXbmcvfs.cpp

ifeq (@USE_DOXYGEN@,1)
DOXY_XML_PATH=generatedSWIGBindings/doxygenxml
else
DOXY_XML_PATH=
endif

SWIG_INC += -I@abs_top_srcdir@/xbmc
INCLUDES += @PYTHON_CPPFLAGS@ $(SWIG_INC)

CLEAN_FILES=generatedSWIGBindings generator/*.class generator/bindings/*.class

LIB=swig.a

CXXFLAGS+= -DSWIGRUNTIME_DEBUG -DSTATIC_LINKED

include ../../../Makefile.include
-include $(patsubst %.cpp,%.P,$(patsubst %.c,%.P,$(SRCS)))

generatedSWIGBindings/dummy: ../native/*.h
	mkdir -p generatedSWIGBindings
	touch generatedSWIGBindings/dummy

generatedSWIGBindings/doxygenxml/dummy: generatedSWIGBindings/dummy ./Doxyfile ../native/*.h
ifeq (@USE_DOXYGEN@,1)
	@DOXYGEN_EXE@
else
	echo "Warning: No doxygen installed. The Api will not have any docstrings."
	mkdir -p generatedSWIGBindings/doxygenxml
endif
	touch generatedSWIGBindings/doxygenxml/dummy

generatedSWIGBindings/AddonModuleXbmc.xml:	AddonModuleXbmc.i generatedSWIGBindings/dummy generatedSWIGBindings/doxygenxml/dummy
	@SWIG_EXE@ -w401 -c++ -outdir generatedSWIGBindings -o generatedSWIGBindings/AddonModuleXbmc.xml -xml $(SWIG_INC) -xmllang python AddonModuleXbmc.i

generatedSWIGBindings/AddonModuleXbmcgui.xml: AddonModuleXbmcgui.i generatedSWIGBindings/dummy generatedSWIGBindings/doxygenxml/dummy
	@SWIG_EXE@ -w401 -c++ -outdir generatedSWIGBindings -o generatedSWIGBindings/AddonModuleXbmcgui.xml -xml $(SWIG_INC) -xmllang python AddonModuleXbmcgui.i

generatedSWIGBindings/AddonModuleXbmcplugin.xml: AddonModuleXbmcplugin.i generatedSWIGBindings/dummy generatedSWIGBindings/doxygenxml/dummy
	@SWIG_EXE@ -w401 -c++ -outdir generatedSWIGBindings -o generatedSWIGBindings/AddonModuleXbmcplugin.xml -xml $(SWIG_INC) -xmllang python AddonModuleXbmcplugin.i

generatedSWIGBindings/AddonModuleXbmcaddon.xml: AddonModuleXbmcaddon.i generatedSWIGBindings/dummy generatedSWIGBindings/doxygenxml/dummy
	@SWIG_EXE@ -w401 -c++ -outdir generatedSWIGBindings -o generatedSWIGBindings/AddonModuleXbmcaddon.xml -xml $(SWIG_INC) -xmllang python AddonModuleXbmcaddon.i

generatedSWIGBindings/AddonModuleXbmcvfs.xml: AddonModuleXbmcvfs.i generatedSWIGBindings/dummy generatedSWIGBindings/doxygenxml/dummy
	@SWIG_EXE@ -w401 -c++ -outdir generatedSWIGBindings -o generatedSWIGBindings/AddonModuleXbmcvfs.xml -xml $(SWIG_INC) -xmllang python AddonModuleXbmcvfs.i

generatedSWIGBindings/AddonModuleXbmc.cpp: generatedSWIGBindings/AddonModuleXbmc.xml
	@JAVA_EXE@ -cp "../../../lib/groovy/groovy-all-1.8.4.jar:../../../lib/groovy/commons-lang-2.6.jar:./generator" groovy.ui.GroovyMain generator/Generator.groovy generatedSWIGBindings/AddonModuleXbmc.xml generator/bindings/PythonSwig.cpp.template generatedSWIGBindings/AddonModuleXbmc.cpp $(DOXY_XML_PATH)

generatedSWIGBindings/AddonModuleXbmcgui.cpp: generatedSWIGBindings/AddonModuleXbmcgui.xml
	@JAVA_EXE@ -cp "../../../lib/groovy/groovy-all-1.8.4.jar:../../../lib/groovy/commons-lang-2.6.jar:./generator" groovy.ui.GroovyMain generator/Generator.groovy generatedSWIGBindings/AddonModuleXbmcgui.xml generator/bindings/PythonSwig.cpp.template generatedSWIGBindings/AddonModuleXbmcgui.cpp $(DOXY_XML_PATH)

generatedSWIGBindings/AddonModuleXbmcplugin.cpp: generatedSWIGBindings/AddonModuleXbmcplugin.xml
	@JAVA_EXE@ -cp "../../../lib/groovy/groovy-all-1.8.4.jar:../../../lib/groovy/commons-lang-2.6.jar:./generator" groovy.ui.GroovyMain generator/Generator.groovy generatedSWIGBindings/AddonModuleXbmcplugin.xml generator/bindings/PythonSwig.cpp.template generatedSWIGBindings/AddonModuleXbmcplugin.cpp $(DOXY_XML_PATH)

generatedSWIGBindings/AddonModuleXbmcaddon.cpp: generatedSWIGBindings/AddonModuleXbmcaddon.xml
	@JAVA_EXE@ -cp "../../../lib/groovy/groovy-all-1.8.4.jar:../../../lib/groovy/commons-lang-2.6.jar:./generator" groovy.ui.GroovyMain generator/Generator.groovy generatedSWIGBindings/AddonModuleXbmcaddon.xml generator/bindings/PythonSwig.cpp.template generatedSWIGBindings/AddonModuleXbmcaddon.cpp $(DOXY_XML_PATH)

generatedSWIGBindings/AddonModuleXbmcvfs.cpp: generatedSWIGBindings/AddonModuleXbmcvfs.xml
	@JAVA_EXE@ -cp "../../../lib/groovy/groovy-all-1.8.4.jar:../../../lib/groovy/commons-lang-2.6.jar:./generator" groovy.ui.GroovyMain generator/Generator.groovy generatedSWIGBindings/AddonModuleXbmcvfs.xml generator/bindings/PythonSwig.cpp.template generatedSWIGBindings/AddonModuleXbmcvfs.cpp $(DOXY_XML_PATH)
