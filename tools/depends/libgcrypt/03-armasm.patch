--- arm-apple-darwin/mpi/longlong.h	2005-07-29 15:31:17.000000000 +0200
+++ arm-apple-darwin/mpi/longlong.h	2013-01-20 17:57:21.000000000 +0100
@@ -224,6 +224,16 @@
 	     "r" ((USItype)(b))                                         \
 	   : "r0", "r1", "r2")
 #else
+#if defined(__APPLE__) && defined(__arm__)
+#define umul_ppmm(xh, xl, a, b)                                         \
+  __asm__ ("@ Inlined umul_ppmm\n"                                     \
+	   "umull %1, %0, %2, %3"                                   \
+		   : "=&r" ((USItype)(xh)),                             \
+		     "=r" ((USItype)(xl))                               \
+		   : "r" ((USItype)(a)),                                \
+		     "r" ((USItype)(b))                                 \
+		   : "r0", "r1")
+#else
 #define umul_ppmm(xh, xl, a, b)                                         \
   __asm__ ("%@ Inlined umul_ppmm\n"                                     \
 	   "umull %r1, %r0, %r2, %r3"                                   \
@@ -233,6 +243,7 @@
 		     "r" ((USItype)(b))                                 \
 		   : "r0", "r1")
 #endif
+#endif
 #define UMUL_TIME 20
 #define UDIV_TIME 100
 #endif /* __arm__ */
